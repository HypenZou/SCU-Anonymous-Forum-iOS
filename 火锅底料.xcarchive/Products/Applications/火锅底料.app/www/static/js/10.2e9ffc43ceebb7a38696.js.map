{"version":3,"sources":["webpack:///src/view/personalCenter/historyPosts.vue","webpack:///./src/view/personalCenter/historyPosts.vue?41b2","webpack:///./src/view/personalCenter/historyPosts.vue"],"names":["historyPosts","name","components","MescrollVue","_mescroll_js_1_4_2_mescroll_js_mescroll","data","snackbar","show","message","color","map","mescrollDown","callback","this","refreshData","use","mescrollUp","getMoreData","noMoreSize","empty","warpId","icon","tip","btntext","btnClick","supportTap","created","methods","timeFormat","latest_comment_time","t","Math","floor","Date","getTime","d","h","m","s","res","toJSON","substr","replace","mescroll","that","$request","timeToken","then","endSuccess","length","catch","e","endErr","page","time","created_time","_that$historyPosts","num","console","log","push","apply","toConsumableArray_default","rightSlide","$router","go","directives","touch","personalCenter_historyPosts","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","margin-top","attrs","fixed","app","fab","text","small","on","click","$event","back","large","_v","rawName","value","expression","arg","ref","down","up","id","_l","item","i","key","width","flat","rounded","path","query","size","src","avatar","alt","_s","title","content","bottom","model","$$v","$set","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"4LAsDAA,GACAC,KAAA,eACAC,YACAC,YAAAC,EAAA,GAEAC,KALA,WAMA,OACAL,gBACAM,UACAC,MAAA,EACAC,QAAA,GACAC,MAAA,gBAEAC,MAAA,EACAC,cACAC,SAAAC,KAAAC,YACAC,KAAA,GAEAC,YACAJ,SAAAC,KAAAI,YACAC,WAAA,EACAC,OACAC,OAAA,iBACAC,KAAA,KACAC,IAAA,SACAC,QAAA,GACAC,SAAA,KACAC,YAAA,MAKAC,QAhCA,aAkCAC,SAEAC,WAFA,SAEAC,GAEA,IAAAC,EAAAC,KAAAC,QACA,IAAAC,MAAAC,UAAA,IAAAD,KAAAJ,GAAAK,WAAA,KAEAC,EAAAJ,KAAAC,MAAAF,EAAA,SACAM,EAAAL,KAAAC,MAAAF,EAAA,SACAO,EAAAN,KAAAC,MAAAF,EAAA,OACAQ,EAAAP,KAAAC,MAAAF,EAAA,IACAS,EAAA,GACA,GAAAD,EAAA,MAAAD,GAAA,GAAAD,GAAA,GAAAD,EACAI,EAAAD,EAAA,UACA,GAAAD,EAAA,MAAAD,GAAA,GAAAD,EACAI,EAAAF,EAAA,UACA,MAAAD,EAAA,MAAAD,GAMA,OAHA,IAAAF,KACA,IAAAA,KAAAJ,GAAAK,UAAA,OAEAM,SAAAC,OAAA,MAAAC,QAAA,SALAH,EAAAH,EAAA,MAOA,OAAAG,GAEAzB,YA1BA,SA0BA6B,GACA,IAAAC,EAAA/B,KACA+B,EAAAC,SAAA,gCACAC,WAAA,IAAAb,MAAAC,eAEAa,KAAA,SAAAR,GACAK,EAAA5C,aAAAuC,EAAAlC,KACAsC,EAAAK,WAAAT,EAAAlC,KAAA4C,UAEAC,MAAA,SAAAC,GACAR,EAAAS,YAIAnC,YAxCA,SAwCAoC,EAAAV,GACA,IAAAC,EAAA/B,KACAyC,EAAAV,EAAA5C,aAAAiD,OAAA,EACA,IAAAhB,KAAAW,EAAA5C,aAAA4C,EAAA5C,aAAAiD,OAAA,GAAAM,cAAArB,WACA,IAAAD,MAAAC,UACAU,EAAAC,SAAA,gCACAC,UAAAQ,IAEAP,KAAA,SAAAR,GAAA,IAAAiB,EACA,IAAAH,EAAAI,MAAAb,EAAA5C,iBACA0D,QAAAC,IAAApB,EAAAlC,OACAmD,EAAAZ,EAAA5C,cAAA4D,KAAAC,MAAAL,EAAAM,IAAAvB,EAAAlC,OACAsC,EAAAK,WAAAT,EAAAlC,KAAA4C,UAEAC,MAAA,SAAAC,GACAR,EAAAS,YAGAW,WA1DA,WA2DAlD,KAAAmD,QAAAC,IAAA,KAGAC,YACAC,QAAA,ICjJeC,GADEC,OALjB,WAA0B,IAAAC,EAAAzD,KAAa0D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,YAAA,4BAAsCF,EAAA,aAAkBE,YAAA,MAAAC,aAA+BC,aAAA,4BAAwCC,OAAQC,MAAA,GAAAC,IAAA,GAAAvE,MAAA,WAAqCgE,EAAA,SAAcE,YAAA,OAAAG,OAA0BG,IAAA,GAAAC,KAAA,GAAAC,MAAA,IAA8BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAhB,EAAAN,QAAAuB,MAAA,OAA8Bd,EAAA,UAAeK,OAAOU,MAAA,MAAYlB,EAAAmB,GAAA,wBAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,QAAwDE,YAAA,qBAA+BL,EAAAmB,GAAA,cAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,OAA6CP,aAAajE,KAAA,QAAAyF,QAAA,qBAAAC,MAAArB,EAAA,WAAAsB,WAAA,aAAAC,IAAA,eAA0GC,IAAA,UAAAnB,YAAA,oCAA8DF,EAAA,gBAAqBqB,IAAA,WAAAhB,OAAsBiB,KAAAzB,EAAA3D,aAAAqF,GAAA1B,EAAAtD,cAA6CyD,EAAA,OAAYK,OAAOmB,GAAA,oBAAuB3B,EAAAmB,GAAA,KAAAnB,EAAA4B,GAAA5B,EAAA,sBAAA6B,EAAAC,GAAyD,OAAA3B,EAAA,UAAoB4B,IAAAD,EAAAzB,YAAA,OAAAG,OAAgCrE,MAAA,QAAA6F,MAAA,OAAAC,KAAA,GAAAC,QAAA,IAAsDpB,IAAKC,MAAA,SAAAC,GAAyB,OAAAhB,EAAAN,QAAAJ,MAC9jC6C,KAAA,cACAC,OAAeT,GAAAE,EAAAF,UACHxB,EAAA,eAAoBE,YAAA,iCAA2CF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,YAAiBE,YAAA,YAAAG,OAA+B6B,KAAA,QAAalC,EAAA,OAAYK,OAAO8B,IAAAT,EAAAU,OAAAC,IAAA,UAA8BxC,EAAAmB,GAAA,KAAAhB,EAAA,OAA0BE,YAAA,uBAAiCF,EAAA,QAAaE,YAAA,iCAA2CL,EAAAmB,GAAA,IAAAnB,EAAAyC,GAAAZ,EAAAlG,SAAAqE,EAAAmB,GAAA,KAAAhB,EAAA,QAAyDE,YAAA,wCAAkDL,EAAAmB,GAAAnB,EAAAyC,GAAAzC,EAAA1C,WAAAuE,EAAA5C,qBAAA,GAAAe,EAAAmB,GAAA,KAAAhB,EAAA,QAAmFE,YAAA,6BAAuCF,EAAA,QAAaE,YAAA,eAAyBL,EAAAmB,GAAA,QAAAnB,EAAAyC,GAAAZ,EAAAa,YAAA1C,EAAAmB,GAAA,KAAAhB,EAAA,OAA+DE,YAAA,sCAAgDF,EAAA,QAAaE,YAAA,eAAyBL,EAAAmB,GAAA,WAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,QAA2CE,YAAA,gBAA0BL,EAAAmB,GAAAnB,EAAAyC,GAAAZ,EAAAc,iBAAA,MAAyC,OAAA3C,EAAAmB,GAAA,KAAAhB,EAAA,cAAuCK,OAAOoC,OAAA,GAAAzG,MAAA6D,EAAAhE,SAAAG,OAAuC0G,OAAQxB,MAAArB,EAAAhE,SAAA,KAAAM,SAAA,SAAAwG,GAAmD9C,EAAA+C,KAAA/C,EAAAhE,SAAA,OAAA8G,IAAoCxB,WAAA,mBAA6BtB,EAAAmB,GAAAnB,EAAAyC,GAAAzC,EAAAhE,SAAAE,aAAA,IAE3hC8G,oBCFjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEzH,EACAoE,GATF,EAVA,SAAAsD,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/10.2e9ffc43ceebb7a38696.js","sourcesContent":["<template>\n  <v-container class=\"d-flex flex-column px-0\" >\n    <v-app-bar fixed class=\"top\"  style=\"margin-top:env(safe-area-inset-top);\" app  color=\"white\">\n      <v-btn fab text small @click=\"$router.back(-1)\" class=\"mt-2\">\n        <v-icon large>mdi-arrow-left</v-icon>\n      </v-btn>\n      <span class=\"text_middle mt-2\">历史发帖</span>\n    </v-app-bar>\n\n    <div class=\"mescroll_container_historyPosts\" ref=\"viewBox\" v-touch:swiperight=\"rightSlide\">\n      <mescroll-vue ref=\"mescroll\" :down=\"mescrollDown\" :up=\"mescrollUp\">\n        <div id=\"noMoreDataWrap\"></div>\n        <v-card\n          color=\"white\"\n          width=\"100%\"\n          class=\"mt-2\"\n          flat\n          rounded\n          v-for=\"(item,i) in historyPosts\"\n          :key=\"i\"\n          @click=\"$router.push({\n          path:'/postDetail',\n          query:{id:item.id}\n        });\"\n        >\n          <v-card-text class=\"d-flex flex-column pt-2 pb-4\">\n            <div class=\"d-flex\">\n              <v-avatar size=\"40\" class=\"ml-3 mb-1\">\n                <img :src=\"item.avatar\" alt=\"头像\" />\n              </v-avatar>\n              <div class=\"d-flex flex-column\">\n                <span class=\"text_small-- text_thick ml-2\">#{{item.name}}</span>\n                <span class=\"text_small--- ml-2 grey--text mt-n1\">{{timeFormat(item.created_time)}}</span>\n              </div>\n            </div>\n            <span class=\"text_small-- black--text\">\n              <span class=\"text_thick\">【帖子】 {{item.title}}</span>\n            </span>\n            <div class=\"grey_background_historyPosts pa-1\">\n              <span class=\"text_thick\">【内容】:</span>\n              <span class=\"black--text\">{{item.content}}</span>\n            </div>\n          </v-card-text>\n        </v-card>\n      </mescroll-vue>\n    </div>\n    <v-snackbar v-model=\"snackbar.show\" bottom :color=\"snackbar.color\">{{snackbar.message}}</v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport map from \"@/map/map.js\";\nimport MescrollVue from \"mescroll.js/mescroll.vue\"; \nimport touch from '../../utils/touch'\nexport default {\n  name: \"historyPosts\",\n  components: {\n    MescrollVue, // 注册mescroll组件\n  },\n  data() {\n    return {\n      historyPosts: [],\n      snackbar: {\n        show: false,\n        message: \"\",\n        color: \"grey-darken3\",\n      },\n      map: map,\n      mescrollDown: {\n        callback: this.refreshData,\n        use: true,\n      },\n      mescrollUp: {\n        callback: this.getMoreData,\n        noMoreSize: 3,\n        empty: {\n          warpId: 'noMoreDataWrap',\n          icon: null,\n          tip: \"暂无历史发帖\",\n          btntext: \"\",\n          btnClick: null,\n          supportTap: false\n        }\n      },\n    };\n  },\n  created() {\n  },\n  methods: {\n    //计算时间差\n    timeFormat(latest_comment_time) {\n      //一共这么多秒前\n      let t = Math.floor(\n        (new Date().getTime() - new Date(latest_comment_time).getTime()) / 1000\n      );\n      const d = Math.floor(t / 3600 / 24);\n      const h = Math.floor(t / 3600) % 24;\n      const m = Math.floor(t / 60) % 60;\n      const s = Math.floor(t % 60);\n      let res = ''\n      if (s > 0 && m == 0 && h == 0 && d == 0) {\n        res = s + \"秒前\";\n      } else if (m > 0 && h == 0 && d == 0) {\n        res = m + \"分钟前\";\n      } else if (h > 0 && d == 0) {\n        res = h + \"小时前\";\n      } else {\n        let date = new Date(\n          new Date(latest_comment_time).getTime() + 8 * 3600 * 1000\n        );\n        return date.toJSON().substr(0, 16).replace('T', ' ');\n      }\n      return res;\n    },\n    refreshData(mescroll) {\n      let that = this;\n      that.$request('get', '/forum/getHistoryPosts', {\n        timeToken: new Date().getTime()\n      }, {})\n        .then((res) => {\n          that.historyPosts = res.data;\n          mescroll.endSuccess(res.data.length);\n        })\n        .catch((e) => {\n          mescroll.endErr();\n        });\n    },\n\n    getMoreData(page, mescroll) {\n      let that = this;\n      let time = that.historyPosts.length > 0 ?\n        new Date(that.historyPosts[that.historyPosts.length - 1].created_time).getTime()\n        : new Date().getTime();\n      that.$request('get', '/forum/getHistoryPosts', {\n        timeToken: time\n      })\n        .then((res) => {\n          if (page.num === 1) that.historyPosts = []\n          console.log(res.data)\n          that.historyPosts.push(...res.data);\n          mescroll.endSuccess(res.data.length);\n        })\n        .catch((e) => {\n          mescroll.endErr();\n        });\n    },\n     rightSlide(){\n      this.$router.go(-1)\n    }\n  },\n  directives: {\n    touch\n  }\n};\n</script>\n\n<style>\n.main_container_historyPosts {\n  margin-top: 50px;\n}\n.grey_background_historyPosts {\n  background-color: #f5f5f5;\n  border-radius: 10px;\n  width: 90%;\n}\n.mescroll_container_historyPosts {\n  position: fixed;\n  top: calc(60px+env(safe-area-inset-top));\n  bottom: 0;\n  height: auto; /*如设置bottom:50px,则需height:auto才能生效*/\n  width: 100%;\n  background-color: #f5f5f5;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/personalCenter/historyPosts.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"d-flex flex-column px-0\"},[_c('v-app-bar',{staticClass:\"top\",staticStyle:{\"margin-top\":\"env(safe-area-inset-top)\"},attrs:{\"fixed\":\"\",\"app\":\"\",\"color\":\"white\"}},[_c('v-btn',{staticClass:\"mt-2\",attrs:{\"fab\":\"\",\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.$router.back(-1)}}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-arrow-left\")])],1),_vm._v(\" \"),_c('span',{staticClass:\"text_middle mt-2\"},[_vm._v(\"历史发帖\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"touch\",rawName:\"v-touch:swiperight\",value:(_vm.rightSlide),expression:\"rightSlide\",arg:\"swiperight\"}],ref:\"viewBox\",staticClass:\"mescroll_container_historyPosts\"},[_c('mescroll-vue',{ref:\"mescroll\",attrs:{\"down\":_vm.mescrollDown,\"up\":_vm.mescrollUp}},[_c('div',{attrs:{\"id\":\"noMoreDataWrap\"}}),_vm._v(\" \"),_vm._l((_vm.historyPosts),function(item,i){return _c('v-card',{key:i,staticClass:\"mt-2\",attrs:{\"color\":\"white\",\"width\":\"100%\",\"flat\":\"\",\"rounded\":\"\"},on:{\"click\":function($event){return _vm.$router.push({\n        path:'/postDetail',\n        query:{id:item.id}\n      });}}},[_c('v-card-text',{staticClass:\"d-flex flex-column pt-2 pb-4\"},[_c('div',{staticClass:\"d-flex\"},[_c('v-avatar',{staticClass:\"ml-3 mb-1\",attrs:{\"size\":\"40\"}},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"头像\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-column\"},[_c('span',{staticClass:\"text_small-- text_thick ml-2\"},[_vm._v(\"#\"+_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"text_small--- ml-2 grey--text mt-n1\"},[_vm._v(_vm._s(_vm.timeFormat(item.created_time)))])])],1),_vm._v(\" \"),_c('span',{staticClass:\"text_small-- black--text\"},[_c('span',{staticClass:\"text_thick\"},[_vm._v(\"【帖子】 \"+_vm._s(item.title))])]),_vm._v(\" \"),_c('div',{staticClass:\"grey_background_historyPosts pa-1\"},[_c('span',{staticClass:\"text_thick\"},[_vm._v(\"【内容】:\")]),_vm._v(\" \"),_c('span',{staticClass:\"black--text\"},[_vm._v(_vm._s(item.content))])])])],1)})],2)],1),_vm._v(\" \"),_c('v-snackbar',{attrs:{\"bottom\":\"\",\"color\":_vm.snackbar.color},model:{value:(_vm.snackbar.show),callback:function ($$v) {_vm.$set(_vm.snackbar, \"show\", $$v)},expression:\"snackbar.show\"}},[_vm._v(_vm._s(_vm.snackbar.message))])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c3e16cde\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/view/personalCenter/historyPosts.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c3e16cde\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./historyPosts.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyPosts.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyPosts.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c3e16cde\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./historyPosts.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/personalCenter/historyPosts.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}