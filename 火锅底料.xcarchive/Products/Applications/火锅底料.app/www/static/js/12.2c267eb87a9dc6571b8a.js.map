{"version":3,"sources":["webpack:///src/view/personalCenter/historyComments.vue","webpack:///./src/view/personalCenter/historyComments.vue?324d","webpack:///./src/view/personalCenter/historyComments.vue"],"names":["historyComments","name","components","MescrollVue","_mescroll_js_1_4_2_mescroll_js_mescroll","data","mescrollDown","callback","this","refreshData","mescrollUp","getMoreData","noMoreSize","empty","warpId","icon","tip","btntext","btnClick","supportTap","methods","timeFormat","latest_comment_time","t","Math","floor","Date","getTime","d","h","m","s","res","toJSON","substr","replace","mescroll","that","$request","then","console","log","endSuccess","catch","e","endErr","page","time","length","created_time","timeToken","_that$historyComments","num","push","apply","toConsumableArray_default","rightSlide","$router","go","directives","touch","personalCenter_historyComments","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","margin-top","attrs","fixed","app","color","fab","text","small","on","click","$event","back","large","_v","rawName","value","expression","arg","background-color","ref","down","up","id","_l","item","i","key","width","flat","rounded","path","query","postId","size","src","avatar","alt","_s","content","image","_e","title","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.2c267eb87a9dc6571b8a.js","sourcesContent":["<template>\n  <v-container class=\"d-flex flex-column px-0\" >\n    <v-app-bar fixed class=\"top\" style=\"margin-top:env(safe-area-inset-top);\" app  color=\"white\">\n      <v-btn fab text small @click=\"$router.back(-1)\" class=\"mt-2\">\n        <v-icon large>mdi-arrow-left</v-icon>\n      </v-btn>\n      <span class=\"text_middle mt-2\">历史评论</span>\n    </v-app-bar>\n    <div\n      class=\"mescroll_container_historyComments\"\n      style=\"background-color: #f5f5f5;\"\n      v-touch:swiperight=\"rightSlide\"\n    >\n      <mescroll-vue ref=\"mescroll\" :down=\"mescrollDown\" :up=\"mescrollUp\">\n        <div id=\"noMoreDataWrap\"></div>\n        <v-card\n          color=\"white\"\n          width=\"100%\"\n          class=\"mt-2\"\n          flat\n          rounded\n          v-for=\"(item,i) in historyComments\"\n          :key=\"i\"\n          @click=\"$router.push({\n          path:'/postDetail',\n          query:{id:item.postId}\n        });\"\n        >\n          <v-card-text class=\"d-flex flex-column py-2\">\n            <div class=\"d-flex\">\n              <v-avatar size=\"40\" class=\"ml-3 mb-1\">\n                <img :src=\"item.avatar\" alt=\"头像\" />\n              </v-avatar>\n              <div class=\"d-flex flex-column\">\n                <span class=\"text_small-- text_thick ml-2\">#{{item.name}}</span>\n                <span class=\"text_small--- ml-2 grey--text mt-n1\">{{timeFormat(item.created_time)}}</span>\n              </div>\n            </div>\n            <div>\n              <span class=\"text_thick black--text\">【我的回复】:</span>\n              <span class=\"black--text\">{{item.content}}</span>\n              <span v-if=\"item.image!='undefined'\">\n                <br />\n                <span class=\"ml-2\">[图片]</span>\n              </span>\n            </div>\n            <span class=\"text_small-- black--text\">\n              <span class=\"text_thick\">【帖子】</span>\n              {{item.title}}\n            </span>\n          </v-card-text>\n        </v-card>\n      </mescroll-vue>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport MescrollVue from \"mescroll.js/mescroll.vue\";\nimport touch from '../../utils/touch'\nexport default {\n  name: \"historyComments\",\n  components: {\n    MescrollVue, // 注册mescroll组件\n  },\n  data() {\n    return {\n      mescrollDown: {\n        callback: this.refreshData,\n      },\n      mescrollUp: {\n        callback: this.getMoreData,\n        noMoreSize: 3,\n        empty: {\n          warpId: 'noMoreDataWrap',\n          icon: null,\n          tip: \"暂无历史评论\",\n          btntext: \"\",\n          btnClick: null,\n          supportTap: false\n        }\n      },\n      historyComments: []\n    };\n  },\n  methods: {\n    //计算时间差\n    timeFormat(latest_comment_time) {\n      //一共这么多秒前\n      let t = Math.floor(\n        (new Date().getTime() - new Date(latest_comment_time).getTime()) / 1000\n      );\n      const d = Math.floor(t / 3600 / 24);\n      const h = Math.floor(t / 3600) % 24;\n      const m = Math.floor(t / 60) % 60;\n      const s = Math.floor(t % 60);\n      let res = ''\n      if (s > 0 && m == 0 && h == 0 && d == 0) {\n        res = s + \"秒前\";\n      } else if (m > 0 && h == 0 && d == 0) {\n        res = m + \"分钟前\";\n      } else if (h > 0 && d == 0) {\n        res = h + \"小时前\";\n      } else {\n        let date = new Date(\n          new Date(latest_comment_time).getTime() + 8 * 3600 * 1000\n        );\n        return date.toJSON().substr(0, 16).replace('T', ' ');\n      }\n      return res;\n    },\n    refreshData(mescroll) {\n      let that = this\n      that.$request('get', '/user/getHistoryComments', {})\n        .then(res => {\n          console.log(res)\n          that.historyComments = res.data\n          mescroll.endSuccess()\n        })\n        .catch(e => {\n          console.log(e)\n          mescroll.endErr()\n        })\n    },\n    getMoreData(page, mescroll) {\n      let that = this\n      let time = that.historyComments.length > 0 ? new Date(that.historyComments[that.historyComments.length - 1].created_time).getTime()\n        : new Date().getTime()\n      that.$request('get', '/user/getHistoryComments', {\n        timeToken: time\n      })\n        .then(res => {\n          if (page.num === 1) that.historyComments = []\n          that.historyComments.push(...res.data)\n          mescroll.endSuccess(res.data.length)\n        })\n        .catch(e => {\n          console.log(e)\n          mescroll.endErr()\n        })\n    },\n    rightSlide(){\n      this.$router.go(-1)\n    }\n  },\n  directives: {\n    touch\n  }\n};\n</script>\n\n<style>\n.mescroll_container_historyComments {\n  position: fixed;\n  top: calc(60px+env(safe-area-inset-top));\n  bottom: 0;\n  height: auto; /*如设置bottom:50px,则需height:auto才能生效*/\n  width: 100%;\n  background-color: #f5f5f5;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/personalCenter/historyComments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"d-flex flex-column px-0\"},[_c('v-app-bar',{staticClass:\"top\",staticStyle:{\"margin-top\":\"env(safe-area-inset-top)\"},attrs:{\"fixed\":\"\",\"app\":\"\",\"color\":\"white\"}},[_c('v-btn',{staticClass:\"mt-2\",attrs:{\"fab\":\"\",\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.$router.back(-1)}}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-arrow-left\")])],1),_vm._v(\" \"),_c('span',{staticClass:\"text_middle mt-2\"},[_vm._v(\"历史评论\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"touch\",rawName:\"v-touch:swiperight\",value:(_vm.rightSlide),expression:\"rightSlide\",arg:\"swiperight\"}],staticClass:\"mescroll_container_historyComments\",staticStyle:{\"background-color\":\"#f5f5f5\"}},[_c('mescroll-vue',{ref:\"mescroll\",attrs:{\"down\":_vm.mescrollDown,\"up\":_vm.mescrollUp}},[_c('div',{attrs:{\"id\":\"noMoreDataWrap\"}}),_vm._v(\" \"),_vm._l((_vm.historyComments),function(item,i){return _c('v-card',{key:i,staticClass:\"mt-2\",attrs:{\"color\":\"white\",\"width\":\"100%\",\"flat\":\"\",\"rounded\":\"\"},on:{\"click\":function($event){return _vm.$router.push({\n        path:'/postDetail',\n        query:{id:item.postId}\n      });}}},[_c('v-card-text',{staticClass:\"d-flex flex-column py-2\"},[_c('div',{staticClass:\"d-flex\"},[_c('v-avatar',{staticClass:\"ml-3 mb-1\",attrs:{\"size\":\"40\"}},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"头像\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-column\"},[_c('span',{staticClass:\"text_small-- text_thick ml-2\"},[_vm._v(\"#\"+_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"text_small--- ml-2 grey--text mt-n1\"},[_vm._v(_vm._s(_vm.timeFormat(item.created_time)))])])],1),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"text_thick black--text\"},[_vm._v(\"【我的回复】:\")]),_vm._v(\" \"),_c('span',{staticClass:\"black--text\"},[_vm._v(_vm._s(item.content))]),_vm._v(\" \"),(item.image!='undefined')?_c('span',[_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"[图片]\")])]):_vm._e()]),_vm._v(\" \"),_c('span',{staticClass:\"text_small-- black--text\"},[_c('span',{staticClass:\"text_thick\"},[_vm._v(\"【帖子】\")]),_vm._v(\"\\n            \"+_vm._s(item.title)+\"\\n          \")])])],1)})],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-57f4c562\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/view/personalCenter/historyComments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57f4c562\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./historyComments.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyComments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyComments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57f4c562\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./historyComments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/personalCenter/historyComments.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}