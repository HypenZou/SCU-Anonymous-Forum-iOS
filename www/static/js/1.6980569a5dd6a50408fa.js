webpackJsonp([1],{"4hyn":function(t,s){},"81gF":function(t,s,a){t.exports=a.p+"static/img/top_6.7cc069c.png"},CHsn:function(t,s,a){t.exports=a.p+"static/img/top_10.5cf26e9.png"},Dxyt:function(t,s,a){t.exports=a.p+"static/img/top_7.5060218.png"},EH4g:function(t,s,a){t.exports=a.p+"static/img/top_2.410ed52.png"},KVIO:function(t,s,a){t.exports=a.p+"static/img/top_9.354a1df.png"},Kzu5:function(t,s,a){t.exports=a.p+"static/img/top_8.b8ca45a.png"},T260:function(t,s,a){t.exports=a.p+"static/img/top_5.6add3b3.png"},WfyG:function(t,s,a){var e={"./top_1.png":"lC8E","./top_10.png":"CHsn","./top_2.png":"EH4g","./top_3.png":"y1fV","./top_4.png":"fHNP","./top_5.png":"T260","./top_6.png":"81gF","./top_7.png":"Dxyt","./top_8.png":"Kzu5","./top_9.png":"KVIO"};function i(t){return a(o(t))}function o(t){var s=e[t];if(!(s+1))throw new Error("Cannot find module '"+t+"'.");return s}i.keys=function(){return Object.keys(e)},i.resolve=o,t.exports=i,i.id="WfyG"},WwBW:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("RzMJ"),i={name:"hot",components:{MescrollVue:a("wst3").a},data:function(){return{tab:0,tabs:["热门","精选"],map:e.a,HotPostRecently:[],digestPosts:[],snackbar:{show:!1,message:"再点一次退出",color:"grey-darken3"},bottomDrawer:{showBottomDrawer:!1,chooseIndex:0,dislike_num:0,listName:"HotPostRecently"},hotExplainDialog:!1,down1:{use:!1},up1:{onScroll:this.onScroll,use:!1},down2:{use:!1},up2:{onScroll:this.onScroll,callback:function(t,s){s.endSuccess(0)}}}},created:function(){console.log(location.hash);var t=this;t.$request("get","/forum/getHotPostRecently",{},{}).then(function(s){t.HotPostRecently=s.data}).catch(function(s){t.showSnackbar(s)}),setTimeout(function(){t.$request("get","/forum/getDigestPosts",{},{}).then(function(s){t.digestPosts=s.data}).catch(function(s){t.showSnackbar(s)})},500)},methods:{onScroll:function(t,s,a){this.$store.change_isUp(a)},timeFormat:function(t){var s=Math.floor(((new Date).getTime()-new Date(t).getTime())/1e3),a=Math.floor(s/3600/24),e=Math.floor(s/3600)%24,i=Math.floor(s/60)%60,o=Math.floor(s%60),n="";if(o>0&&0==i&&0==e&&0==a)n=o+"秒前";else if(i>0&&0==e&&0==a)n=i+"分钟前";else{if(!(e>0&&0==a))return new Date(new Date(t).getTime()+288e5).toJSON().substr(0,16).replace("T"," ");n=e+"小时前"}return n},likeOrDislike:function(t,s,a){var e=this;e.$request("post","/forum/forumLikeOrDislike",{},{postId:Number(e[a][t].id),value:s}).then(function(i){e.showSnackbar(i,"ok"),1==s?e[a][t].like_num++:-1==s&&(e.bottomDrawer.dislike_num++,e[a][t].dislike_num++)}).catch(function(t){console.log(t),e.showSnackbar(t)})},addCollect:function(t,s){var a=this;a.$request("post","/forum/addCollect",{},{postId:Number(a[s][t].id)}).then(function(t){a.showSnackbar(t,"ok")}).catch(function(t){a.showSnackbar(t)})},showBottomDrawer:function(t,s){this.bottomDrawer.showBottomDrawer=!0,this.bottomDrawer.chooseIndex=t,this.bottomDrawer.dislike_num=this[s][t].dislike_num,this.bottomDrawer.listName=s}},watch:{hotExplainDialog:function(t){this.$store.change_dialog(t,"hotExplainDialog")},"$store.state.dialog":function(t){"hotExplainDialog"==this.$store.state.dialogName&&(this.hotExplainDialog=t)}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main_container"},[e("div",{staticClass:"mescroll_container_hot"},[e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on,i=s.attrs;return[e("span",t._g(t._b({staticClass:"d-flex justify-end",staticStyle:{"margin-left":"50%","margin-right":"10px"}},"span",i,!1),a),[e("span",{staticClass:"mr-2 text_thick"},[t._v(t._s(t.tabs[t.tab]))]),t._v(" "),e("v-icon",[t._v("mdi-filter-variant")])],1)]}}])},[t._v(" "),e("v-list",t._l(t.tabs,function(s,a){return e("v-list-item",{key:a,on:{click:function(s){t.tab=a}}},[e("v-list-item-title",{class:t.tab==a?"red--text":""},[t._v(t._s(s))])],1)}),1)],1),t._v(" "),e("mescroll-vue",{ref:"mescroll",staticStyle:{overflow:"auto"},attrs:{down:t.down1,up:t.up1}},[0==t.tab?e("div",t._l(t.HotPostRecently,function(s,i){return e("div",{key:i,staticClass:"d-flex ",on:{click:function(a){t.$router.push({path:"/postDetail",query:{id:Number(s.id)}})}}},[e("v-card",{staticClass:"rounded-0 mb-3 d-flex flex-column justify-start align-center",attrs:{width:"20%",flat:""}},[e("v-avatar",{staticClass:"ml-2 mt-2",attrs:{size:"58px"}},[e("v-img",{attrs:{src:a("WfyG")("./top_"+(i+1)+".png"),width:"58px",contain:""}})],1),t._v(" "),e("div",{staticClass:"d-flex justify-center flex-column"},[e("span",{staticClass:"text_black text_thick text_small-- ml-1 mt-2"},[t._v("热度:")]),t._v(" "),e("span",{staticClass:"text_grey text_small--- ml-2"},[t._v(t._s(s.hot_num))]),t._v(" "),e("v-btn",{staticClass:"ml-1",attrs:{small:"",icon:""},on:{click:function(s){s.stopPropagation(),t.hotExplainDialog=!0}}},[e("v-icon",{staticClass:"mt-n1",attrs:{size:"18px"}},[t._v("mdi-help-circle")])],1)],1)],1),t._v(" "),e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"80%",flat:"",rounded:""}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:s.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("span",{staticClass:"text_small text_thick"},[t._v(t._s(s.thread_starter_name))]),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(s.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(s){return s.stopPropagation(),t.showBottomDrawer(i,"HotPostRecently")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"mt-1 d-flex flex-column pb-0"},["无"==s.tag?e("div",[e("span",{staticClass:"text_small text_thick text_black"},[t._v(t._s(s.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v(t._s(s.content))]),t._v(" "),e("span",[e("v-chip",{staticClass:"ma-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[s.category]))]),t._v(" "),e("span",[t._v(t._s(s.category))])],1)],1)]):e("div",[e("span",{staticClass:"text-decoration-line-through text_small text_thick text_black"},[t._v("已折叠")]),t._v(" "),e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"18px"}},[t._v(t._s(t.map.tagToIcon[s.tag]))]),t._v(" "),e("span",[t._v(t._s(s.tag))])],1),t._v(" "),e("v-expansion-panels",{attrs:{flat:"",dense:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"d-flex justify-start",on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"actions",fn:function(){return[e("v-icon",{staticClass:"mt-n2",attrs:{size:"30px"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),e("div",{style:s.tag.length>2?"width:35px":"width:0px"},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"black",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.tagToIcon[s.tag]))]),t._v(" "),e("span",[t._v(t._s(s.tag))])],1)],1),t._v(" "),e("div",{staticStyle:{width:"60px"}},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[s.category]))]),t._v(" "),e("span",[t._v(t._s(s.category))])],1)],1)]),t._v(" "),e("v-expansion-panel-content",{staticClass:"mt-n3",staticStyle:{"border-radius":"10px",overflow:"hidden"},attrs:{color:"grey lighten-4"}},[e("div",[e("span",{staticClass:"text_small text_thick text_black"},[t._v("【题目】"+t._s(s.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v("【内容】"+t._s(s.content))])])])],1)],1)],1),t._v(" "),e("span",{staticClass:"d-flex align-center"},[e("v-btn",{attrs:{icon:"",small:"",color:"black"},on:{click:function(s){return s.stopPropagation(),t.likeOrDislike(i,1,"HotPostRecently")}}},[e("v-icon",{attrs:{size:"22px"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-3",attrs:{icon:"",small:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-3",attrs:{icon:"",small:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.comment_num))])],1)])],1)],1)}),0):e("div",t._l(t.digestPosts,function(s,a){return e("div",{key:a,staticClass:"d-flex"},["无"==s.tag?e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"100%",flat:"",rounded:""},on:{click:function(a){t.$router.push({path:"/postDetail",query:{id:Number(s.id)}}),t.$store.change_scrollYLeave()}}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:s.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text_small text_thick"},[t._v("#"+t._s(s.thread_starter_name))]),t._v(" "),null!=s.vote?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("投票")])]):t._e(),t._v(" "),null!=s.digest?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("加精")])]):t._e()],1),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(s.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(s){return s.stopPropagation(),t.showBottomDrawer(a,"digestPosts")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"mt-1 d-flex flex-column pb-0"},[e("span",{staticClass:"text_small text_thick text_black"},[t._v(t._s(s.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v(t._s(s.content))]),t._v(" "),e("span",[e("v-chip",{staticClass:"ma-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[s.category]))]),t._v(" "),e("span",[t._v(t._s(s.category))])],1)],1),t._v(" "),e("span",{staticClass:"d-flex align-center"},[e("v-btn",{attrs:{icon:"",small:""},on:{click:function(s){return s.stopPropagation(),t.likeOrDislike(a,1,"digestPosts")}}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(s.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-5",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-6",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.comment_num))])],1)])],1):e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"100%",flat:"",rounded:""},on:{click:function(a){t.$router.push({path:"/postDetail",query:s}),t.$store.change_scrollYLeave()}}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:s.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text_small text_thick"},[t._v("#"+t._s(s.thread_starter_name))]),t._v(" "),null!=s.vote?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("投票")])]):t._e(),t._v(" "),null!=s.digest?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("加精")])]):t._e()],1),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(s.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(s){return s.stopPropagation(),t.showBottomDrawer(a,"digestPosts")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"pb-0"},[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"text-decoration-line-through text_small text_thick black--text"},[t._v("【已折叠 】")]),t._v(" "),e("v-btn",{staticClass:"pa-0",attrs:{fab:"","x-small":"",text:""}},[e("v-icon",{attrs:{size:"20px",color:"black"},on:{click:function(s){s.stopPropagation(),t.openWhyFoldedDialog=!0}}},[t._v("mdi-help-circle")])],1)],1),t._v(" "),e("div",[e("v-expansion-panels",{attrs:{flat:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"d-flex justify-start",on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"actions",fn:function(){return[e("v-icon",{staticClass:"mt-n2",attrs:{size:"30px"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),e("div",{style:s.tag.length>2?"width:35px":"width:0px"},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"black",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.tagToIcon[s.tag]))]),t._v(" "),e("span",[t._v(t._s(s.tag))])],1)],1),t._v(" "),e("div",{staticStyle:{width:"60px"}},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[s.category]))]),t._v(" "),e("span",[t._v(t._s(s.category))])],1)],1),t._v(" "),e("v-spacer")],1),t._v(" "),e("v-expansion-panel-content",{staticClass:"mt-n3",staticStyle:{"border-radius":"10px",overflow:"hidden"},attrs:{color:"grey lighten-4"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"text_thick black--text text_small line_one"},[t._v(t._s(s.title))]),t._v(" "),e("span",{staticClass:"text_small--- grey--text line_three"},[t._v(t._s(s.content))])])])],1)],1)],1)]),t._v(" "),e("span",{staticClass:"d-flex align-center"},[e("v-btn",{attrs:{icon:"",small:""},on:{click:function(s){return s.stopPropagation(),t.likeOrDislike(a,1,"digestPosts")}}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(s.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-5",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-6",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(s.comment_num))])],1)])],1)],1)}),0),t._v(" "),e("div",{staticClass:"mt-14 mt-md-16"})])],1),t._v(" "),e("v-snackbar",{attrs:{bottom:"",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(s){t.$set(t.snackbar,"show",s)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.message))]),t._v(" "),e("v-navigation-drawer",{staticStyle:{height:"16%","z-index":"99"},attrs:{dark:"",bottom:"",fixed:"",touchless:""},model:{value:t.bottomDrawer.showBottomDrawer,callback:function(s){t.$set(t.bottomDrawer,"showBottomDrawer",s)},expression:"bottomDrawer.showBottomDrawer"}},[e("div",[e("v-btn",{attrs:{text:"",outlined:"",width:"100%",height:"8vh"},on:{click:function(s){return t.likeOrDislike(t.bottomDrawer.chooseIndex,-1,t.bottomDrawer.listName)}}},[e("v-icon",[t._v("mdi-alert-decagram-outline")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("举报")]),t._v(" "),e("span",{staticClass:"ml-1 text_xsmall grey--text"},[t._v("【举报数:"+t._s(t.bottomDrawer.dislike_num)+"】")])],1),t._v(" "),e("v-btn",{attrs:{text:"",outlined:"",width:"100%",height:"8vh"},on:{click:function(s){return t.addCollect(t.bottomDrawer.chooseIndex,t.bottomDrawer.listName)}}},[e("v-icon",[t._v("mdi-bookmark-multiple-outline")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("收藏")])],1)],1)]),t._v(" "),e("v-dialog",{attrs:{scrollable:"",overlay:!1,"max-width":"500px",transition:"dialog-transition",dark:""},model:{value:t.hotExplainDialog,callback:function(s){t.hotExplainDialog=s},expression:"hotExplainDialog"}},[e("v-card",{staticStyle:{"background-color":"#363636"}},[e("v-card-title",[e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-fire")]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("热度解释")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"mt-2"},[e("div",[e("span",[t._v("『火锅底料』社区热度计算公式:")]),t._v(" "),e("br"),t._v(" "),e("span",[t._v("\n            热度 = 浏览量 × 1 + 评论数 × 2 + 点赞数 × 3 + 收藏数 × 4 - 举报数\n            × 5\n          ")]),t._v(" "),e("br"),t._v(" "),e("span",[t._v("热度排名由上往下取前十")]),t._v(" "),e("span")])])],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(i,o,!1,function(t){a("4hyn")},null,null);s.default=n.exports},fHNP:function(t,s,a){t.exports=a.p+"static/img/top_4.961fe2d.png"},lC8E:function(t,s,a){t.exports=a.p+"static/img/top_1.bc61735.png"},y1fV:function(t,s,a){t.exports=a.p+"static/img/top_3.16fbab7.png"}});
//# sourceMappingURL=1.6980569a5dd6a50408fa.js.map